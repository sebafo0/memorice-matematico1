<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Memorice Matemático</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #e1f5fe;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background-color: #0288d1;
      color: white;
      padding: 20px 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 20px;
      justify-content: center;
      margin-top: 20px;
    }
    .card {
      background: #b3e5fc;
      border-radius: 10px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }
    .card:hover {
      background: #81d4fa;
      transform: scale(1.05);
    }
    .matched {
      background: #a5d6a7 !important;
      pointer-events: none;
    }
    .wrong {
      background: #ef9a9a !important;
    }
    .controls {
      margin-bottom: 20px;
    }
    select, .score, button {
      font-size: 16px;
      padding: 8px;
      margin: 0 10px;
    }
    .score span {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>Memorice Matemático</h1>
    <p>¡Encuentra las parejas correctas y aprende jugando!</p>
  </header>
  <div class="container">
    <div class="controls">
      <label for="curso">Curso:</label>
      <select id="curso">
        <option value="1medio">1° Medio</option>
        <option value="2medio">2° Medio</option>
        <option value="3medio">3° Medio</option>
        <option value="4medio">4° Medio</option>
      </select>
      <label for="nivel">Nivel:</label>
      <select id="nivel">
        <option value="facil">Fácil</option>
        <option value="medio">Medio</option>
        <option value="dificil">Difícil</option>
      </select>
      <span class="score">Puntaje: <span id="puntaje">0</span></span>
      <span class="score">Puntaje Máximo: <span id="maxPuntaje">0</span></span>
      <button onclick="reiniciarJuego()">Reiniciar</button>
    </div>
    <div class="grid" id="grid"></div>
  </div>
  <script>
    const datos = {
      "1medio": {
        facil: [
          { pregunta: "5 + 3", respuesta: "8" },
          { pregunta: "2 × 2", respuesta: "4" },
          { pregunta: "10 − 4", respuesta: "6" },
          { pregunta: "6 ÷ 2", respuesta: "3" },
          { pregunta: "3 × 3", respuesta: "9" },
          { pregunta: "7 + 5", respuesta: "12" },
          { pregunta: "8 − 6", respuesta: "2" }
        ],
        medio: [
          { pregunta: "8 × 5", respuesta: "40" },
          { pregunta: "12 ÷ 4", respuesta: "3" },
          { pregunta: "15 − 6", respuesta: "9" },
          { pregunta: "4 × 7", respuesta: "28" },
          { pregunta: "20 ÷ 5", respuesta: "4" },
          { pregunta: "9 + 6", respuesta: "15" },
          { pregunta: "11 − 2", respuesta: "9" }
        ],
        dificil: [
          { pregunta: "3²", respuesta: "9" },
          { pregunta: "√64", respuesta: "8" },
          { pregunta: "7²", respuesta: "49" },
          { pregunta: "√25", respuesta: "5" },
          { pregunta: "4³", respuesta: "64" },
          { pregunta: "√36", respuesta: "6" },
          { pregunta: "5²", respuesta: "25" }
        ]
      },
      "2medio": {
        facil: [
          { pregunta: "1/2 + 1/2", respuesta: "1" },
          { pregunta: "3/4 − 1/4", respuesta: "1/2" },
          { pregunta: "2/3 + 1/3", respuesta: "1" },
          { pregunta: "5/5", respuesta: "1" },
          { pregunta: "1/4 + 1/4", respuesta: "1/2" },
          { pregunta: "2/2", respuesta: "1" },
          { pregunta: "3/3", respuesta: "1" }
        ],
        medio: [
          { pregunta: "2³", respuesta: "8" },
          { pregunta: "√16", respuesta: "4" },
          { pregunta: "3²", respuesta: "9" },
          { pregunta: "5²", respuesta: "25" },
          { pregunta: "√49", respuesta: "7" },
          { pregunta: "4²", respuesta: "16" },
          { pregunta: "√81", respuesta: "9" }
        ],
        dificil: [
          { pregunta: "x + 3 = 7", respuesta: "x = 4" },
          { pregunta: "x − 2 = 5", respuesta: "x = 7" },
          { pregunta: "2x = 10", respuesta: "x = 5" },
          { pregunta: "x/3 = 4", respuesta: "x = 12" },
          { pregunta: "3x + 1 = 10", respuesta: "x = 3" },
          { pregunta: "x − 5 = 0", respuesta: "x = 5" },
          { pregunta: "2x − 4 = 6", respuesta: "x = 5" }
        ]
      },
      "3medio": {
        facil: [
          { pregunta: "Área del cuadrado (lado 4)", respuesta: "16" },
          { pregunta: "Área del triángulo (b=4, h=3)", respuesta: "6" },
          { pregunta: "Área del rectángulo (2×5)", respuesta: "10" },
          { pregunta: "Área del círculo (r=1)", respuesta: "3.14" },
          { pregunta: "Perímetro de cuadrado (lado 3)", respuesta: "12" },
          { pregunta: "Área del rombo (d1=6, d2=4)", respuesta: "12" },
          { pregunta: "Área del trapecio (3+5)×2/2", respuesta: "8" }
        ],
        medio: [
          { pregunta: "f(x) = 2x, f(3)", respuesta: "6" },
          { pregunta: "f(x) = x + 4, f(1)", respuesta: "5" },
          { pregunta: "f(x) = x², f(2)", respuesta: "4" },
          { pregunta: "f(x) = 3x − 1, f(2)", respuesta: "5" },
          { pregunta: "f(x) = x² − 1, f(3)", respuesta: "8" },
          { pregunta: "f(x) = 2x + 2, f(0)", respuesta: "2" },
          { pregunta: "f(x) = 5, f(10)", respuesta: "5" }
        ],
        dificil: [
          { pregunta: "(x+2)(x−3)", respuesta: "x²−x−6" },
          { pregunta: "x² + 2x + 1", respuesta: "(x+1)²" },
          { pregunta: "x² − 9", respuesta: "(x+3)(x−3)" },
          { pregunta: "(x−5)²", respuesta: "x²−10x+25" },
          { pregunta: "(x+4)²", respuesta: "x²+8x+16" },
          { pregunta: "(x+2)(x+3)", respuesta: "x²+5x+6" },
          { pregunta: "x² + 4x + 4", respuesta: "(x+2)²" }
        ]
      },
      "4medio": {
        facil: [
          { pregunta: "Prob. cara en moneda", respuesta: "0.5" },
          { pregunta: "Prob. par en dado", respuesta: "0.5" },
          { pregunta: "Prob. rojo en baraja", respuesta: "0.5" },
          { pregunta: "Prob. 1 en dado", respuesta: "1/6" },
          { pregunta: "Prob. impar en dado", respuesta: "0.5" },
          { pregunta: "Prob. rey en baraja", respuesta: "4/52" },
          { pregunta: "Prob. no sacar as", respuesta: "48/52" }
        ],
        medio: [
          { pregunta: "sen(90°)", respuesta: "1" },
          { pregunta: "cos(0°)", respuesta: "1" },
          { pregunta: "tan(45°)", respuesta: "1" },
          { pregunta: "sen(0°)", respuesta: "0" },
          { pregunta: "cos(180°)", respuesta: "-1" },
          { pregunta: "sen(30°)", respuesta: "0.5" },
          { pregunta: "cos(60°)", respuesta: "0.5" }
        ],
        dificil: [
          { pregunta: "d/dx (x²)", respuesta: "2x" },
          { pregunta: "d/dx (3x)", respuesta: "3" },
          { pregunta: "d/dx (x³)", respuesta: "3x²" },
          { pregunta: "d/dx (2x²)", respuesta: "4x" },
          { pregunta: "d/dx (5x^4)", respuesta: "20x³" },
          { pregunta: "d/dx (x)", respuesta: "1" },
          { pregunta: "d/dx (7)", respuesta: "0" }
        ]
      }
    };

    const grid = document.getElementById("grid");
    const puntajeEl = document.getElementById("puntaje");
    const maxPuntajeEl = document.getElementById("maxPuntaje");
    const cursoSelector = document.getElementById("curso");
    const nivelSelector = document.getElementById("nivel");

    let puntaje = 0;
    let seleccionadas = [];
    let maxPuntaje = localStorage.getItem("maxPuntaje") || 0;
    maxPuntajeEl.innerText = maxPuntaje;

    function cargarJuego(curso, nivel) {
      grid.innerHTML = "";
      puntaje = 0;
      puntajeEl.innerText = puntaje;
      seleccionadas = [];

      let pares = datos[curso][nivel].slice(0, 7); // 7 pares = 14 cartas
      let cartas = [];

      pares.forEach(par => {
        cartas.push({ texto: par.pregunta, valor: par.respuesta });
        cartas.push({ texto: par.respuesta, valor: par.respuesta });
      });

      cartas = cartas.sort(() => 0.5 - Math.random());

      cartas.forEach((carta) => {
        const div = document.createElement("div");
        div.classList.add("card");
        div.dataset.valor = carta.valor;
        div.innerText = "?";

        div.addEventListener("click", () => {
          if (div.innerText === "?" && seleccionadas.length < 2) {
            div.innerText = carta.texto;
            seleccionadas.push({ div, valor: carta.valor });

            if (seleccionadas.length === 2) {
              setTimeout(() => {
                const [a, b] = seleccionadas;
                if (a.valor === b.valor) {
                  a.div.classList.add("matched");
                  b.div.classList.add("matched");
                  puntaje += 10;
                } else {
                  a.div.classList.add("wrong");
                  b.div.classList.add("wrong");
                  setTimeout(() => {
                    a.div.innerText = "?";
                    b.div.innerText = "?";
                    a.div.classList.remove("wrong");
                    b.div.classList.remove("wrong");
                  }, 300);
                  puntaje -= 2;
                }
                puntajeEl.innerText = puntaje;
                if (puntaje > maxPuntaje) {
                  maxPuntaje = puntaje;
                  localStorage.setItem("maxPuntaje", puntaje);
                  maxPuntajeEl.innerText = puntaje;
                }
                seleccionadas = [];
              }, 500);
            }
          }
        });

        grid.appendChild(div);
      });
    }

    function reiniciarJuego() {
      cargarJuego(cursoSelector.value, nivelSelector.value);
    }

    cursoSelector.addEventListener("change", () => reiniciarJuego());
    nivelSelector.addEventListener("change", () => reiniciarJuego());

    cargarJuego("1medio", "facil");
  </script>
</body>
</html>

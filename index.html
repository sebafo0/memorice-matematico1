<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Memorice Matemático</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #e1f5fe;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background-color: #0288d1;
      color: white;
      padding: 20px 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 20px;
      justify-content: center;
      margin-top: 20px;
    }
    .card {
      width: 100px;
      height: 100px;
      background: #b3e5fc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }
    .card:hover {
      background: #81d4fa;
      transform: scale(1.05);
    }
    .matched {
      background: #a5d6a7 !important;
      pointer-events: none;
    }
    .correct {
      animation: correctFlash 0.5s;
    }
    .wrong {
      animation: wrongFlash 0.5s;
    }
    @keyframes correctFlash {
      0% { background-color: #a5d6a7; }
      100% { background-color: #b3e5fc; }
    }
    @keyframes wrongFlash {
      0% { background-color: #ef9a9a; }
      100% { background-color: #b3e5fc; }
    }
    .controls {
      margin-bottom: 20px;
    }
    select, .score, button {
      font-size: 16px;
      padding: 8px;
      margin: 0 10px;
    }
    button {
      background-color: #0288d1;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0277bd;
    }
  </style>
</head>
<body>
  <header>
    <h1>Memorice Matemático</h1>
    <p>¡Encuentra las parejas correctas y aprende jugando!</p>
  </header>
  <div class="container">
    <div class="controls">
      <label for="curso">Curso:</label>
      <select id="curso">
        <option value="1medio">1° Medio</option>
        <option value="2medio">2° Medio</option>
        <option value="3medio">3° Medio</option>
        <option value="4medio">4° Medio</option>
      </select>

      <label for="nivel">Nivel:</label>
      <select id="nivel">
        <option value="facil">Fácil</option>
        <option value="medio">Medio</option>
        <option value="dificil">Difícil</option>
      </select>

      <span class="score">Puntaje: <span id="puntaje">0</span></span>
      <button id="reiniciar">Reiniciar</button>
    </div>
    <h2>Haz clic en dos cartas para encontrar el par correcto</h2>
    <div class="grid" id="grid"></div>
  </div>
  <script>
    const datosPorCurso = {
      "1medio": {
        facil: [
          { pregunta: "3 + 2", respuesta: "5" },
          { pregunta: "4 × 2", respuesta: "8" },
          { pregunta: "7 − 4", respuesta: "3" },
          { pregunta: "6 ÷ 2", respuesta: "3" },
          { pregunta: "5 + 1", respuesta: "6" },
          { pregunta: "9 − 3", respuesta: "6" },
          { pregunta: "8 ÷ 4", respuesta: "2" },
          { pregunta: "2 × 4", respuesta: "8" }
        ],
        medio: [
          { pregunta: "(6 × 3) + 1", respuesta: "19" },
          { pregunta: "5²", respuesta: "25" },
          { pregunta: "√64", respuesta: "8" },
          { pregunta: "3 × 3", respuesta: "9" },
          { pregunta: "10 ÷ 2", respuesta: "5" },
          { pregunta: "7 + 4", respuesta: "11" },
          { pregunta: "2²", respuesta: "4" },
          { pregunta: "8 − 3", respuesta: "5" }
        ],
        dificil: [
          { pregunta: "√49 + 2", respuesta: "9" },
          { pregunta: "2³", respuesta: "8" },
          { pregunta: "√81", respuesta: "9" },
          { pregunta: "4³", respuesta: "64" },
          { pregunta: "7 × 7", respuesta: "49" },
          { pregunta: "5 × 6", respuesta: "30" },
          { pregunta: "(3 × 5) − 2", respuesta: "13" },
          { pregunta: "20 ÷ 4", respuesta: "5" }
        ]
      },
      "2medio": { facil: [], medio: [], dificil: [] },
      "3medio": { facil: [], medio: [], dificil: [] },
      "4medio": { facil: [], medio: [], dificil: [] }
    };

    const grid = document.getElementById("grid");
    const puntajeEl = document.getElementById("puntaje");
    const nivelSelector = document.getElementById("nivel");
    const cursoSelector = document.getElementById("curso");
    const reiniciarBtn = document.getElementById("reiniciar");

    let puntaje = 0;
    let seleccionadas = [];

    function cargarJuego(curso, nivel) {
      grid.innerHTML = "";
      puntaje = 0;
      puntajeEl.innerText = puntaje;
      seleccionadas = [];

      let pares = datosPorCurso[curso][nivel];
      let cartas = [];

      pares.forEach(par => {
        cartas.push({ texto: par.pregunta, valor: par.respuesta });
        cartas.push({ texto: par.respuesta, valor: par.respuesta });
      });

      cartas = cartas.sort(() => 0.5 - Math.random());

      cartas.forEach((carta) => {
        const div = document.createElement("div");
        div.classList.add("card");
        div.dataset.valor = carta.valor;
        div.innerText = "?";

        div.addEventListener("click", () => {
          if (div.innerText === "?" && seleccionadas.length < 2) {
            div.innerText = carta.texto;
            seleccionadas.push({ div, valor: carta.valor });

            if (seleccionadas.length === 2) {
              setTimeout(() => {
                const [a, b] = seleccionadas;
                if (a.valor === b.valor) {
                  a.div.classList.add("matched", "correct");
                  b.div.classList.add("matched", "correct");
                  puntaje += 10;
                } else {
                  a.div.classList.add("wrong");
                  b.div.classList.add("wrong");
                  setTimeout(() => {
                    a.div.classList.remove("wrong");
                    b.div.classList.remove("wrong");
                    a.div.innerText = "?";
                    b.div.innerText = "?";
                  }, 500);
                  puntaje -= 2;
                }
                puntajeEl.innerText = puntaje;
                seleccionadas = [];
              }, 600);
            }
          }
        });

        grid.appendChild(div);
      });
    }

    function actualizarJuego() {
      const curso = cursoSelector.value;
      const nivel = nivelSelector.value;
      cargarJuego(curso, nivel);
    }

    nivelSelector.addEventListener("change", actualizarJuego);
    cursoSelector.addEventListener("change", actualizarJuego);
    reiniciarBtn.addEventListener("click", actualizarJuego);

    cargarJuego("1medio", "facil");
  </script>
</body>
</html>

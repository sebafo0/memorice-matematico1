<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memorice Matemático</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #f7c59f, #ffee93);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }
    h1 {
      color: #333;
      margin: 20px 0 10px;
    }
    .controls {
      margin: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    select, button {
      padding: 10px;
      border: none;
      border-radius: 10px;
      background-color: #4caf50;
      color: white;
      font-size: 16px;
    }
    #tablero {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 15px;
      max-width: 700px;
      width: 100%;
      margin: 20px auto;
      padding: 10px;
    }
    .carta {
      background-color: #ffb6b9;
      color: #333;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 15px;
      height: 100px;
      cursor: pointer;
      transition: transform 0.3s, background-color 0.3s;
    }
    .carta.acertada {
      background-color: #81c784 !important;
    }
    .carta.error {
      background-color: #e57373 !important;
    }
    .puntaje {
      margin: 10px;
      font-size: 18px;
    }
    #modo-profe {
      display: none;
      background-color: #2196f3;
      padding: 15px;
      color: white;
      border-radius: 10px;
      margin-top: 20px;
      width: 90%;
      max-width: 600px;
    }
    #explicacion {
      font-size: 14px;
      color: #333;
      margin: 10px 0;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Memorice Matemático</h1>
  <div class="controls">
    <select id="curso">
      <option value="1">1° Medio</option>
      <option value="2">2° Medio</option>
      <option value="3">3° Medio</option>
      <option value="4">4° Medio</option>
    </select>
    <select id="nivel">
      <option value="facil">Fácil</option>
      <option value="medio">Medio</option>
      <option value="dificil">Difícil</option>
    </select>
    <button onclick="iniciarJuego()">Comenzar</button>
    <button onclick="reiniciarJuego()">Reiniciar</button>
    <button onclick="mostrarModoProfe()">Modo Profe</button>
  </div>
  <div class="puntaje" id="puntaje">Puntaje: 0 | Mejor Puntaje: 0</div>
  <div id="cronometro">Tiempo: 0s</div>
  <div id="explicacion"></div>
  <div id="tablero"></div>
  <div id="modo-profe"></div>  <script>
    const ejercicios = {
      1: {
        facil: [
          ['2+2', '4'], ['1+3', '4'], ['3+1', '4'], ['5-1', '4'], ['8/2', '4'], ['4x1', '4'], ['6-2', '4']
        ],
        medio: [
          ['3x2', '6'], ['2x3', '6'], ['6/1', '6'], ['7-1', '6'], ['9-3', '6'], ['12/2', '6'], ['2x3', '6']
        ],
        dificil: [
          ['3x(2+1)', '9'], ['(4x2)-1', '7'], ['5+3-1', '7'], ['14/2', '7'], ['3+4', '7'], ['10-3', '7'], ['21/3', '7']
        ]
      },
      2: {
        facil: [['1/2 + 1/2', '1'], ['2/4', '1/2'], ['3/6', '1/2'], ['5/10', '1/2'], ['4/8', '1/2'], ['6/12', '1/2'], ['7/14', '1/2']],
        medio: [['√4', '2'], ['√9', '3'], ['2²', '4'], ['3²', '9'], ['√16', '4'], ['√25', '5'], ['5²', '25']],
        dificil: [['x+3=5', 'x=2'], ['2x=6', 'x=3'], ['x-4=2', 'x=6'], ['x/2=3', 'x=6'], ['x+5=10', 'x=5'], ['3x=9', 'x=3'], ['x-2=1', 'x=3']]
      },
      3: {
        facil: [['Área cuadrado 2cm', '4cm²'], ['Área rectángulo 2x3', '6cm²'], ['Área triángulo base 4 altura 2', '4cm²'], ['Perímetro cuadrado 2cm', '8cm'], ['Área círculo r=1', '3.14cm²'], ['Área cuadrado 3cm', '9cm²'], ['Área rectángulo 3x3', '9cm²']],
        medio: [['y=2x cuando x=2', '4'], ['y=x+3 si x=1', '4'], ['y=3x si x=2', '6'], ['f(x)=x² si x=2', '4'], ['f(x)=2x+1 si x=2', '5'], ['y=-x+3 si x=1', '2'], ['y=4x si x=1', '4']],
        dificil: [['(x+1)(x-1)=?', 'x²-1'], ['(x+2)²=?', 'x²+4x+4'], ['x²+x-6=0 una raíz', 'x=2'], ['x²-4=0 una raíz', 'x=2'], ['(x-3)(x+3)', 'x²-9'], ['(x+1)²', 'x²+2x+1'], ['x²-5x+6', '(x-2)(x-3)']]
      },
      4: {
        facil: [['Prob 1 cara moneda', '1/2'], ['Prob 1 de 6 dado', '1/6'], ['Prob par dado', '3/6'], ['Prob impar dado', '3/6'], ['Prob >4 dado', '2/6'], ['Prob <3 dado', '2/6'], ['Prob 2 cara moneda', '1/4']],
        medio: [['sen(30°)', '0.5'], ['cos(0°)', '1'], ['tan(45°)', '1'], ['sen(90°)', '1'], ['cos(60°)', '0.5'], ['sen(0°)', '0'], ['cos(90°)', '0']],
        dificil: [['d/dx x²', '2x'], ['d/dx 3x', '3'], ['d/dx x³', '3x²'], ['d/dx x', '1'], ['d/dx 2x²', '4x'], ['d/dx 5', '0'], ['d/dx x²+1', '2x']]
      }
    };

    let cartas = [];
    let seleccionadas = [];
    let puntaje = 0;
    let mejorPuntaje = localStorage.getItem("mejorPuntaje") || 0;
    let cursoStats = {};
    let erroresTotales = 0;
    let aciertosTotales = 0;
    let cronometro;
    let tiempoRestante = 0;

    function iniciarJuego() {
      const curso = document.getElementById("curso").value;
      const nivel = document.getElementById("nivel").value;
      const ejerciciosNivel = ejercicios[curso][nivel];
      cartas = [...ejerciciosNivel].flatMap(pair => [
        { texto: pair[0], respuesta: pair[1] },
        { texto: pair[1], respuesta: pair[1] }
      ]);
      cartas = cartas.sort(() => Math.random() - 0.5);
      mostrarCartas();
      puntaje = 0;
      document.getElementById("puntaje").textContent = `Puntaje: ${puntaje} | Mejor Puntaje: ${mejorPuntaje}`;
      document.getElementById("explicacion").textContent = "";
      actualizarTiempo(nivel);
      registrarEstadisticas(curso, nivel);
    }

    function actualizarTiempo(nivel) {
      clearInterval(cronometro);
      if (nivel === "facil") tiempoRestante = 180;
      else if (nivel === "medio") tiempoRestante = 120;
      else tiempoRestante = 60;
      document.getElementById("cronometro").textContent = `Tiempo: ${tiempoRestante}s`;
      cronometro = setInterval(() => {
        tiempoRestante--;
        document.getElementById("cronometro").textContent = `Tiempo: ${tiempoRestante}s`;
        if (tiempoRestante <= 0) {
          clearInterval(cronometro);
          alert("¡Tiempo terminado!");
        }
      }, 1000);
    }

    function mostrarCartas() {
      const tablero = document.getElementById("tablero");
      tablero.innerHTML = "";
      cartas.forEach((carta, index) => {
        const div = document.createElement("div");
        div.className = "carta";
        div.textContent = "?";
        div.onclick = () => seleccionarCarta(div, carta, index);
        tablero.appendChild(div);
      });
    }

    function seleccionarCarta(div, carta, index) {
      if (seleccionadas.length < 2 && !div.classList.contains("acertada")) {
        div.textContent = carta.texto;
        seleccionadas.push({ div, carta, index });
        if (seleccionadas.length === 2) {
          verificarMatch();
        }
      }
    }

    function verificarMatch() {
      const [a, b] = seleccionadas;
      if (a.carta.respuesta === b.carta.respuesta) {
        a.div.classList.add("acertada");
        b.div.classList.add("acertada");
        mostrarExplicacion(a.carta.texto, b.carta.texto, a.carta.respuesta);
        puntaje += 10;
        aciertosTotales++;
      } else {
        a.div.classList.add("error");
        b.div.classList.add("error");
        erroresTotales++;
        puntaje -= 2;
        setTimeout(() => {
          a.div.textContent = "?";
          b.div.textContent = "?";
          a.div.classList.remove("error");
          b.div.classList.remove("error");
        }, 800);
      }
      seleccionadas = [];
      if (puntaje > mejorPuntaje) {
        mejorPuntaje = puntaje;
        localStorage.setItem("mejorPuntaje", mejorPuntaje);
      }
      document.getElementById("puntaje").textContent = `Puntaje: ${puntaje} | Mejor Puntaje: ${mejorPuntaje}`;
    }

    function mostrarExplicacion(txt1, txt2, res) {
      const texto = `${txt1} y ${txt2} corresponden a la respuesta: ${res}`;
      document.getElementById("explicacion").textContent = texto;
    }

    function reiniciarJuego() {
      iniciarJuego();
    }

    function registrarEstadisticas(curso, nivel) {
      const clave = `Curso ${curso} - ${nivel}`;
      cursoStats[clave] = (cursoStats[clave] || 0) + 1;
    }

    function mostrarModoProfe() {
      const div = document.getElementById("modo-profe");
      let masJugado = Object.entries(cursoStats).sort((a, b) => b[1] - a[1])[0];
      div.innerHTML = `
        <h3>📊 Estadísticas del Modo Profe</h3>
        <p><strong>Curso/Nivel más jugado:</strong> ${masJugado ? masJugado[0] : 'N/A'}</p>
        <p><strong>Total de aciertos:</strong> ${aciertosTotales}</p>
        <p><strong>Total de errores:</strong> ${erroresTotales}</p>
        <p><em>Consejo:</em> Fíjate en las preguntas con más errores para reforzarlas en clase.</p>
      `;
      div.style.display = "block";
    }
  </script></body>
</html>
